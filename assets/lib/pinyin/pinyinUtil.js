(function(){var e={};var b={parseDict:function(){if(window.pinyin_dict_firstletter){e.firstletter=pinyin_dict_firstletter}if(window.pinyin_dict_notone){e.notone={};e.py2hz=pinyin_dict_notone;for(var l in pinyin_dict_notone){var g=pinyin_dict_notone[l];for(var k=0,f=g.length;k<f;k++){e.notone[g[k]]=l}}}if(window.pinyin_dict_withtone){e.withtone={};var g=pinyin_dict_withtone.split(",");for(var l=0,f=g.length;l<f;l++){e.withtone[String.fromCharCode(l+19968)]=g[l]}if(window.pinyin_dict_notone){e.py2hz=pinyin_dict_notone}else{var m=b.removeTone(pinyin_dict_withtone).split(",");var n={},h,o;for(var l=0,f=m.length;l<f;l++){o=String.fromCharCode(l+19968);h=m[l].split(" ");for(var k=0;k<h.length;k++){n[h[k]]=(n[h[k]]||"")+o}}e.py2hz=n}}},getPinyin:function(h,f,g,n){if(!h||/^ +$/g.test(h)){return""}f=f==undefined?" ":f;g=g==undefined?true:g;n=n==undefined?false:n;var o=[];if(e.withtone){for(var j=0,l=h.length;j<l;j++){var k=e.withtone[h[j]];if(k){if(!n){k=k.replace(/ .*$/g,"")}if(!g){k=this.removeTone(k)}}o.push(k||h[j])}}else{if(e.notone){if(g){console.warn("pinyin_dict_notone 字典文件不支持声调！")}if(n){console.warn("pinyin_dict_notone 字典文件不支持多音字！")}for(var j=0,l=h.length;j<l;j++){var m=h.charAt(j);o.push(e.notone[m]||m)}}else{throw"抱歉，未找到合适的拼音字典文件！"}}if(!n){return o.join(f)}else{if(window.pinyin_dict_polyphone){return c(h,o,f,g)}else{return a(o," ",f)}}},getFirstLetter:function(m,k){k=k==undefined?false:k;if(!m||/^ +$/g.test(m)){return""}if(e.firstletter){var g=[];for(var j=0;j<m.length;j++){var f=m.charCodeAt(j);var l=m.charAt(j);if(f>=19968&&f<=40869){l=e.firstletter.all.charAt(f-19968);if(k){l=e.firstletter.polyphone[f]||l}}g.push(l)}if(!k){return g.join("")}else{return a(g,"","")}}else{var h=this.getPinyin(m," ",false,k);h=h instanceof Array?h:[h];var g=[];for(var j=0;j<h.length;j++){g.push(h[j].replace(/(^| )(\w)\w*/g,function(n,i,o){return o.toUpperCase()}))}if(!k){return g[0]}else{return d(g)}}},getHanzi:function(f){if(!e.py2hz){throw"抱歉，未找到合适的拼音字典文件！"}return e.py2hz[f]||""},removeTone:function(f){var g={"ā":"a1","á":"a2","ǎ":"a3","à":"a4","ō":"o1","ó":"o2","ǒ":"o3","ò":"o4","ē":"e1","é":"e2","ě":"e3","è":"e4","ī":"i1","í":"i2","ǐ":"i3","ì":"i4","ū":"u1","ú":"u2","ǔ":"u3","ù":"u4","ü":"v0","ǖ":"v1","ǘ":"v2","ǚ":"v3","ǜ":"v4","ń":"n2","ň":"n3","":"m2"};return f.replace(/[āáǎàōóǒòēéěèīíǐìūúǔùüǖǘǚǜńň]/g,function(h){return g[h][0]})}};function a(n,f,g){f=f||"";var q=[""],o=[];for(var m=0;m<n.length;m++){o=[];var p=n[m].split(f);for(var l=0;l<p.length;l++){for(var h=0;h<q.length;h++){o.push(q[h]+(q[h]?g:"")+p[l])}}q=o}return d(q)}function c(n,s,f,l){var g=window.pinyin_dict_polyphone;var q=7;var r=g[n];if(r){r=r.split(" ");for(var o=0;o<r.length;o++){s[o]=r[o]||s[o];if(!l){s[o]=b.removeTone(s[o])}}return s.join(f)}for(var o=0;o<n.length;o++){r="";for(var m=0;m<q&&(o+m)<n.length;m++){if(!/^[\u2E80-\u9FFF]+$/.test(n[o+m])){break}r+=n[o+m];var p=g[r];if(p){p=p.split(" ");for(var h=0;h<=m;h++){if(p[h]){s[o+h]=l?p[h]:b.removeTone(p[h])}}break}}}for(var o=0;o<s.length;o++){s[o]=s[o].replace(/ .*$/g,"")}return s.join(f)}function d(k){var f=[];var j={};for(var h=0;h<k.length;h++){var g=(typeof k[h])+k[h];if(!j[g]){f.push(k[h]);j[g]=true}}return f}b.parseDict();b.dict=e;window.pinyinUtil=b})();
